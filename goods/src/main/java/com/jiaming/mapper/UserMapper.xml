<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.jiaming.mapper.UserMapper">

	<!-- 登录 -->
	<select id="selectUserByLoginnameAndLoginpass" resultType="com.jiaming.entity.User">
		select  *  from  `user`
		where 
		loginname =#{loginname}
		and
		loginpass = #{loginpass}
	</select>

	<!-- 验证激活码 -->
	<select id="seleUserByActivationCode" resultType="com.jiaming.entity.User">
		select  *  from  `user`
		where  
		activationCode = #{activationCode}
	</select>

	<!-- 验证邮箱名 -->
	<select id="selectUserByEmail" resultType="com.jiaming.entity.User">
		select * from `user`
		where
		email = #{email}
	</select>
	
	<!-- 验证用户名 -->
	<select id="selectUserByLoginname" resultType="com.jiaming.entity.User">
		select * from `user`
		where
		loginname = #{loginname}
	</select>

	<resultMap id="BaseResultMap" type="com.jiaming.entity.User">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Tue Jun 23 
			15:02:12 CST 2020. -->
		<id column="uid" jdbcType="CHAR" property="uid" />
		<result column="loginname" jdbcType="VARCHAR"
			property="loginname" />
		<result column="loginpass" jdbcType="VARCHAR"
			property="loginpass" />
		<result column="email" jdbcType="VARCHAR" property="email" />
		<result column="status" jdbcType="BIT" property="status" />
		<result column="activationCode" jdbcType="CHAR"
			property="activationcode" />
	</resultMap>
	<delete id="deleteByPrimaryKey" parameterType="java.lang.String">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Tue Jun 23 
			15:02:12 CST 2020. -->
		delete from user
		where uid = #{uid,jdbcType=CHAR}
	</delete>
	<insert id="insert" parameterType="com.jiaming.entity.User">
		<selectKey  order="BEFORE"  resultType="string"  keyProperty="uid">
			select  replace(uuid(),"-","") from  dual 
		</selectKey>
		insert into user (uid, loginname, loginpass,
		email, status,
		activationCode
		)
		values (#{uid,jdbcType=CHAR},
		#{loginname,jdbcType=VARCHAR},
		#{loginpass,jdbcType=VARCHAR},
		#{email,jdbcType=VARCHAR}, #{status,jdbcType=BIT},
		#{activationcode,jdbcType=CHAR}
		)
	</insert>
	<update id="updateByPrimaryKey"
		parameterType="com.jiaming.entity.User">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Tue Jun 23 
			15:02:12 CST 2020. -->
		update user
		set loginname = #{loginname,jdbcType=VARCHAR},
		loginpass = #{loginpass,jdbcType=VARCHAR},
		email = #{email,jdbcType=VARCHAR},
		status = #{status,jdbcType=BIT},
		activationCode = #{activationcode,jdbcType=CHAR}
		where uid = #{uid,jdbcType=CHAR}
	</update>
	<select id="selectByPrimaryKey" parameterType="java.lang.String"
		resultMap="BaseResultMap">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Tue Jun 23 
			15:02:12 CST 2020. -->
		select uid, loginname, loginpass, email, status, activationCode
		from user
		where uid = #{uid,jdbcType=CHAR}
	</select>
	<select id="selectAll" resultMap="BaseResultMap">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Tue Jun 23 
			15:02:12 CST 2020. -->
		select uid, loginname, loginpass, email, status, activationCode
		from user
	</select>
</mapper>